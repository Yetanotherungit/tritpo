# Поток событий
---

# Содержание
1 [Актёры](#actors)  
2 [Варианты использования](#use_case)  
2.1 [Войти в приложение](#sign_in_to_the_app)  
2.2 [Зарегистрироваться](#register)  
2.3 [Войти в свою учётную запись](#log_in_to_your_account)  
2.4 [Войти без регистрации](#login_without_registering)  
2.5 [Загрузить новости](#download_news)  
2.6 [Отфильтровать новости](#filter_the_news)  
2.7 [Просмотреть краткую информацию](#view_summary)  
2.8 [Просмотреть подробную информацию](#view_details)  
2.9 [Настроить профиль](#set_up_your_profile)  
2.10 [Добавить интернет-ресурс](#add_resource)  
2.11 [Удалить интернет-ресурс](#remove_resource)  
2.12 [Добавить ключевую фразу](#add_key)  
2.13 [Удалить ключевую фразу](#remove_key)  
2.14 [Выйти из учетной записи](#sign_out_of_your_account)  

<a name="actors"/>

# 1 Актёры

| Актёр | Описание |
|:--|:--|
| Пользователь | Человек, использующий систему |
| Анонимный пользователь | Пользователь, который использует приложение без регистрации в нём |
| Зарегистрированный пользователь | Пользователь, который зарегистрировался в приложении |
| Интернет-ресурс | Web-сайт, информация с которого анализируется приложением |

<a name="use_case"/>

# 2 Варианты использования

<a name="sign_in_to_the_app"/>

## 2.1 Войти в приложение

**Описание.** Вариант использования "Войти в приложение" позволяет пользователю войти в приложение.  
**Основной поток.**
1. Вариант использования начинается, когда пользователь запускает приложение;
2. Приложение отображает возможные способы входа в приложение: [войти в свою учётную запись](#log_in_to_your_account), [зарегистрироваться](#register), [войти без регистрации](#login_without_registering);
3. Пользователь выбирает один из способов входа;
4. Выполняется вариант использования, связанный с выбранным способом входа в приложение. Если вариант использования завершается досрочно, возврат к п.2 основного потока;
5. Приложение скрывает окно входа;
6. Приложение отображает главное окно приложения, соответствующее статусу пользователя;
7. Вариант использования завершается.

**Постусловия.** Выполняется вариант использования "[Загрузить новости](#download_news)".

<a name="register"/>

## 2.2 Зарегистрироваться

**Описание.** Вариант использования "Зарегистрироваться" позволяет пользователю создать свою учётную запись в приложении.  
**Предусловия.** Пользователь выбрал способ "Зарегистрироваться" для входа в приложение или анонимный пользователь выразил желание зарегистрироваться в приложении, выбрав пункт меню "Зарегистрироваться".  
**Основной поток.**
1. Приложение отображает окно регистрации, в котором запрашивает у пользователя ввод имени;
2. Пользователь вводит своё имя;
3. Пользователь подтверждает ввод имени;
4. Приложение проверят введённое имя на совпадение и именами уже зарегистрированных пользователей. Если совпадение выявлено, выполняется альтернативный поток А1;
5. Приложение создает файл профиля пользователя;
6. Приложение записывает в файл профиля настройки, соответствующе профилю анонимного пользователя;
7. Приложение присваивает пользователю статус "зарегистрирован";
8. Приложение скрывает окно регистрации;
9. Вариант использования завершается.

**Альтернативный поток А1.**
1. Приложение сообщает пользователю, что пользователь с таким именем уже существует;
2. Приложение запрашивает у пользователя ввод псевдонима;
3. Возврат к п.2 основного потока.

**Дополнительная информация.** Пользователь имеет возможность отменить действие до подтверждения ввода имени. В случае отмены выполняется альтернативный поток А2.

**Альтернативный поток А2.**
1. Приложение скрывает окно регистрации;
2. Вариант использования завершается досрочно.

<a name="log_in_to_your_account"/>

## 2.3 Войти в свою учётную запись

**Описание.** Вариант использования "Войти в свою учётную запись" позволяет пользователю войти в учётную запись.  
**Предусловия.** Пользователь выбрал способ "Войти в свою учётную запись" для входа в приложение.  
**Основной поток.**
1. Приложение отображает окно входа в учётную запись;
2. Пользователь выбирает своё имя из списка;
3. Пользователь подтверждает выбор имени;
4. Приложение запоминает имя пользователя;
5. Приложение присваивает пользователю статус "зарегистрирован";
6. Приложение скрывает окно регистрации;
7. Вариант использования завершается.

**Дополнительная информация.** Пользователь имеет возможность отменить действие до подтверждения выбора имени. В случае отмены выполняется альтернативный поток А3.

**Альтернативный поток А3.**
1. Приложение скрывает окно регистрации;
2. Вариант использования завершается досрочно.

<a name="login_without_registering"/>

## 2.4 Войти без регистрации

**Описание.** Вариант использования "Войти без регистрации" позволяет пользователю войти в приложение без регистрации.  
**Предусловия.** Пользователь выбрал способ "Войти без регистрации" для входа в приложение.  
**Основной поток.**
1. Приложение присваивает пользователю статус "анонимный";
2. Вариант использования завершается.

<a name="download_news"/>

## 2.5 Загрузить новости

**Описание.** Вариант использования "Загрузить новости" загружает информацию с интернет-ресурсов.  
**Предусловия.** Пользователь вошёл в приложение или зарегистрированный пользователь изменил настройки профиля.  
**Основной поток.**
1. Приложение получает список URL-адресов интернет-ресурсов из профиля пользователя;
2. Если список закончился, переход к п.8 основного потока;
3. Приложение загружает XML-документ из указанного URL-адреса. Если отсутствует подключение к Интернету, выполняется поток ошибки Е1;
4. Выполняется вариант использования "[Отфильтровать новости](#filter_the_news)";
5. Приложение добавляет отфильтрованные новости в список новостей для отображения;
6. Приложение переходит к следующему адресу в списке URL-адресов интернет-ресурсов;
7. Возврат к п.2 основного потока;
8. Приложение отображает новости из списка в таблице главного окна приложения;
9. Вариант использования завершается.

**Поток ошибки Е1.**
1. Приложение сообщает пользователю об отсутствии подключения к Интернету и предлагает список доступных действий: повторить попытку, отменить загрузку;
2. Если пользователь запрашивает повторить попытку, возврат к п.3 основного потока;
2. Вариант использования завершается.

<a name="filter_the_news"/>

## 2.6 Отфильтровать новости

**Описание.** Вариант использования "Отфильтровать новости" отбирает новости в соответствии с настройками пользователя.  
**Предусловия.** Был инициирован вариант использования "[Загрузить новости](#download_news)".  
**Основной поток.**
1. Приложение получает список новостей из XML-документа;
2. Если список новостей закончился, переход к п.10 основного потока;
4. Если список включений пуст, переход к п.5 основного потока;
5. Приложение проверяет наличие хотя бы одной ключевой фразы из списка включений в описании новости. Если результат отрицательный, переход к п.9 основного потока;
6. Если список исключений пуст, переход к п.7 основного потока;
7. Приложение проверяет наличие хотя бы одной ключевой фразы из списка исключений в описании новости. Если результат положительный, переход к п.9 основного потока;
8. Приложение добавляет новость в стисок отфильтрованных новостей;
9. Приложение переходит к следующей новости в списке новостей;
10. Возврат к п.2 основного потока;
11. Вариант использования завершается.

<a name="view_summary"/>

## 2.7 Просмотреть краткую информацию

**Описание.** Вариант использования "Просмотреть краткую информацию" отображает краткую информацию о новости в области "Подробнее" главного окна приложения.  
**Предусловия.** Пользователь вошёл в приложение.  
**Основной поток.**
1. Вариант использования начинается, когда пользователь выбирает новость в таблице одинарным кликом;
2. Приложение отображает краткую информацию о новости в области "Подробнее";
5. Вариант использования завершается.

<a name="view_details"/>

## 2.8 Просмотреть подробную информацию

**Описание.** Вариант использования "Просмотреть подробную информацию" открывает полную версию страницы в браузере, установленном в системе по умолчанию.  
**Предусловия.** Пользователь вошёл в приложение.  
**Основной поток.**
1. Вариант использования начинается, когда пользователь выбирает новость в таблице двойным кликом;
2. Приложение открывает полную версию страницы в браузере, установленном в системе по умолчанию;
5. Вариант использования завершается.

<a name="set_up_your_profile"/>

## 2.9 Настроить профиль

**Описание.** Вариант использования "Настроить профиль" позволяет зарегистрированному пользователю настроить профиль.  
**Предусловия.** Пользователь зарегистрирован в приложении и вошёл в него.  
**Основной поток.**
1. Вариант использования начинается, когда зарегистрированный пользователь выбирает пункт меню "Настроить профиль" на главном окне приложения;
2. Приложение отображает окно настроек профиля, в котором предлагает пользователю выбрать одно из действий: [добавить интернет-ресурс](#add_resource), [удалить интенет-ресурс](#remove_resource), [добавить ключевую фразу](#add_key), [удалить ключевую фразу](#remove_key), сохранить настройки;
3. Если пользователь выбирает один из первых четырёх вариантов, выполняется соответствующий вариант использования;
4. Пользователь выбирает пункт "Сохранить";
5. Приложение сохраняет новые настройки профиля в файл; 
6. Приложение скрывает окно настроек профиля.
7. Вариант использования завершается.

**Дополнительная информация.** Пользователь имеет возможность отменить действие до выбора пункта "Сохранить".  
**Постусловия.** Выполняется вариант использования "[Загрузить новости](#download_news)".

<a name="add_resource"/>

## 2.10 Добавить интернет-ресурс

**Описание.** Вариант использования "Добавить интернет-ресурс" позволяет зарегистрированному пользователю добавить новый URL-адрес интернет-ресурса.  
**Предусловия.** Зарегистрированный пользователь выбрал "Настроить профиль".  
**Основной поток.**
1. Пользователь выбирает "Добавить" в области "Ресурсы" окна настроек профиля;
2. Приложение отображает поле для ввода URL-адреса;
3. Пользователь вводит URL-адрес;
4. Пользователь подтверждает действие;
5. Приложение проверяет наличие URL-адреса в списке. Если он уже присутствует в списке, выполняется альтернативный поток А4;
6. Приложение добавляет URL-адрес в список;
7. Приложение скрывает поле для ввода URL-адреса;
8. Вариант использования завершается.

**Альтернативный поток А4.**
1. Приложение сообщает пользователю об ошибке добавления URL-адреса;
2. Возврат к п.3 основного потока.

<a name="remove_resource"/>

## 2.11 Удалить интернет-ресурс

**Описание.** Вариант использования "Удалить интернет-ресурс" позволяет зарегистрированному пользователю удалить URL-адрес интернет-ресурса.  
**Предусловия.** Зарегистрированный пользователь выбрал "Настроить профиль".  
**Основной поток.**
1. Пользователь выделяет URL-адрес в списке адресов;
2. Пользователь выбирает "Удалить" в области "Ресурсы" окна настроек профиля;
3. Приложение удаляет URL-адрес из списка;
4. Вариант использования завершается.

<a name="add_key"/>

## 2.12 Добавить ключевую фразу

**Описание.** Вариант использования "Добавить ключевую фразу" позволяет зарегистрированному пользователю добавить новую ключевую фразу.  
**Предусловия.** Зарегистрированный пользователь выбрал "Настроить профиль".  
**Основной поток.**
1. Пользователь выбирает "Добавить" в области "Фильтры" окна настроек профиля;
2. Приложение отображает поле для ввода ключевой фразы;
3. Пользователь вводит ключевую фразу;
4. Пользователь подтверждает действие;
5. Приложение проверяет наличие ключевой фразы в списке. Если она уже присутствует в списке, выполняется альтернативный поток А5;
6. Приложение добавляет ключевую фразу в список;
7. Приложение скрывает поле для ввода ключевой фразы;
8. Вариант использования завершается.

**Альтернативный поток А5.**
1. Приложение сообщает пользователю об ошибке добавления ключевой фразы;
2. Возврат к п.3 основного потока.

<a name="remove_key"/>

## 2.13 Удалить ключевую фразу

**Описание.** Вариант использования "Удалить ключевую фразу" позволяет зарегистрированному пользователю удалить ключевую фразу.  
**Предусловия.** Зарегистрированный пользователь выбрал "Настроить профиль".  
**Основной поток.**
1. Пользователь выделяет ключевую фразу в списке;
2. Пользователь выбирает "Удалить" в области "Фильтры" окна настроек профиля;
3. Приложение удаляет ключевую фразу из списка;
4. Вариант использования завершается.

<a name="sign_out_of_your_account"/>

## 2.14 Выйти из учетной записи

**Описание.** Вариант использования "Выйти из учётной записи" позволяет зарегистрированному пользователю выйти из учётной записи.  
**Предусловия.** Пользователь зарегистрирован в приложении и вошёл в него.   
**Основной поток.**
1. Вариант использования начинается, когда зарегистрированный пользователь выбирает пункт меню "Выйти из учётной записи" на главном окне приложения;
2. Приложение скрывает главное окно приложения;
3. Приложение отображает окно входа в приложение;
4. Вариант использования завершается.
